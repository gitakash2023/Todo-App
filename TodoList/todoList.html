<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDo App</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      .sidebar-container {
        display: flex;
      }
      .left-sidebar {
        width: 383px;
        height: 1105px;
        background: #dbeadd;
      }
      .right-sidebar {
        height: 1024px;
        width: 1440px;
      }
      .topNavigation-bar {
        height: 101px;
        background: #d9d9d9;
        box-shadow: 1px 2px 0px 0px rgba(206, 206, 206, 0.53);
      }
      .rightListArea {
        height: 1024px;
        background: #dbeadd;
        display: flex;
        justify-content: center;
      }
      .leftTop-sidebar {
        display: flex;
        width: 303px;
        height: 135px;
        flex-shrink: 0;
        border-radius: 0px 0px 24px 24px;
        background: #dbeadd;
        margin-top: 40px;
        margin-left: 30px;
      }
      .top-iconimg {
        width: 46px;
        height: 51.111px;
        flex-shrink: 0;
      }
      .ToDo {
        color: #0d5329;
        font-family: Josefin Sans;
        font-size: 40px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        margin-left: 18px;
      }
      .leftdown-sidebar {
        display: flex;
        width: 309px;
        height: 48.276px;
        border-radius: 10px;
        background: #c4dcd3;
        margin-top: 15px;
        padding: 10px 20px;
        align-items: center;
      }
      .btn-addtodo {
        color: white;
        padding: 6px;
        margin: 10px;
        background-color: black;
        border-radius: 10px;
        cursor: pointer;
      }
      .btn-addtodo:hover {
        background-color: tan;
        color: black;
      }
      .task-img {
        width: 23px;
        height: 23px;
      }
      .tasks-text {
        color: #5b5b5b;
        font-family: Josefin Sans;
        font-size: 32px;
        font-weight: 400;
        margin-left: 20px;
        cursor: pointer;
      }
      .started-img {
        width: 23px;
        height: 23px;
      }
      .started-text {
        color: #5b5b5b;
        font-family: Josefin Sans;
        font-size: 32px;
        font-weight: 400;
        margin-left: 20px;
        cursor: pointer;
      }
      .bin-img {
        width: 23px;
        height: 23px;
      }
      .bin-text {
        color: #5b5b5b;
        font-family: Josefin Sans;
        font-size: 32px;
        font-weight: 400;
        margin-left: 20px;
        cursor: pointer;
      }
      .dynamicHeading {
        color: red;
        display: flex;
        justify-content: center;
        align-items: center;

        height: 37px;
        color: #26332e;
        font-family: Josefin Sans;
        font-size: 32px;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        margin-top: 20px;
        background: #d9d9d9;
      }
      form {
        position: absolute;
        width: 500px;
        background-color: white;
        padding: 20px 10px;
        height: 150px;
        top: 30%;
        box-shadow: 0px 0px 3px 10px white;
        opacity: 0;
        margin-top: -400px;
        transition: 0.5s;
      }
      .showloginform {
        opacity: 1;
        margin-top: 50px;
        display: block;
      }
      /* .hideloginform {
        opacity: 0;
        margin-top: -400px;
      } */
      form span {
        position: absolute;
        top: 0;
        right: 0;
        width: 30px;
        height: 30px;
        background-color: black;
        color: red;
        cursor: pointer;
        line-height: 30px;
        text-align: center;
        border-radius: 5px;
      }
      form label {
        margin-left: 5px;
      }
      #todo-input {
        width: 310px;
        height: 30px;
        margin-top: 50px;
        border-radius: 7px;
      }
      #add-todo {
        background-color: antiquewhite;
        color: salmon;
        border-radius: 5px;
        height: 35px;
        padding: 10px 15px;
        cursor: pointer;
        margin-left: 10px;
      }
      #add-todo:hover {
        background-color: burlywood;
        color: orange;
      }
      .list-container {
        height: 300px;
        width: 70%;
        margin-top: 70px;
        background-color: #dbeadd;
        overflow: auto;
      }
      .listItem {
        color: black;
        padding: 2px;
        font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
        font-weight: 100;
      }
      .starrednewImg {
        height: 20px;
        width: 20px;
        background-color: #dbeadd;
        cursor: pointer;
      }
      .todoListIcons {
        margin-inline: 10px;
        cursor: pointer;
      }
    </style>
  </head>
  <body style="background-color: #dbeadd">
    <div class="sidebar-container">
      <div class="left-sidebar">
        <div class="leftTop-sidebar">
          <div class="top-iconimg">
            <img src="assets\Icon.svg" alt="Icon img" />
          </div>
          <div class="ToDo" id="todo">TO-DO â€˜s</div>
        </div>
        <div><button class="btn-addtodo">click here to add todo</button></div>
        <div class="leftdown-sidebar">
          <div class="task-img">
            <img src="assets\image 1.png" alt="taksimg" />
          </div>
          <div class="tasks-text" id="taskTest">tasks</div>
        </div>
        <div class="leftdown-sidebar">
          <div class="started-img">
            <img src="assets\Star 2.svg" alt="started img" />
          </div>
          <div class="started-text" id="startedText">starred</div>
        </div>
        <div class="leftdown-sidebar">
          <div class="bin-img">
            <img src="assets\bin icon.svg" alt="bin img" />
          </div>
          <div class="bin-text" id="binText">bin</div>
        </div>
      </div>
      <div class="right-sidebar">
        <div class="topNavigation-bar" id="topNavigation-bar"></div>
        <div class="rightListArea" id="rightListArea">
          <form action="">
            <span class="span">&times;</span>
            <label for="ToDo Input">ToDo Input:</label>
            <input type="text" name="ToDo Input" id="todo-input" />
            <button id="add-todo">add</button>
          </form>
          <div class="list-container"></div>
        </div>
      </div>
    </div>
  </body>
  <script>
    //
    const setTodoItems = (updatedTodoList) => {
      localStorage.setItem("TodoList", JSON.stringify(updatedTodoList));
    };
    const getTodoItems = () => {
      return JSON.parse(localStorage.getItem("TodoList")) || [];
    };
    //  getting elements
    const form = document.querySelector("form");
    const span = document.querySelector(".span");
    const btnAddtodo = document.querySelector(".btn-addtodo");
    const inputField = document.getElementById("todo-input");
    const addTodo = document.getElementById("add-todo");
    const startedText = document.getElementById("startedText");
    const binText = document.getElementById("binText");
    const taskText = document.getElementById("taskTest");
    const rightListArea = document.getElementById("rightListArea");
    const topNavigationbar = document.getElementById("topNavigation-bar");
    const listContainer = document.querySelector(".list-container");

    // add events
    btnAddtodo.addEventListener("click", () => {
      form.classList.add("showloginform");
      topNavigationbar.innerHTML = "";
    });
    span.addEventListener("click", () => {
      form.classList.remove("showloginform");
    });

    addTodo.addEventListener("click", () => {
      const inputData = inputField.value;
      if (!inputData) {
        alert("please enter todo");
        return;
      }

      const currentTodoList = getTodoItems();

      currentTodoList.push({
        id: Date.now(),
        todoTitle: inputData,
        isStarred: false,
        isDeleted: false,
        isPending: true,
      });
      setTodoItems(currentTodoList);
    });

    taskText.addEventListener("click", () => {
      const heading = document.createElement("h1");
      heading.innerHTML = " tasks";
      const topNavigationbar = document.getElementById("topNavigation-bar");
      topNavigationbar.innerHTML = "";
      topNavigationbar.appendChild(heading);
      topNavigationbar.classList.add("dynamicHeading");
      taskText.style.color = "blue";
      heading.style.color = "blue";
      startedText.style.color = "#5b5b5b";
      binText.style.color = "#5b5b5b";
      const currentTodoList = getTodoItems();
      const listToRender = currentTodoList.filter((item) => !item.isDeleted);
      renderList(listToRender);
      //
    });

    startedText.addEventListener("click", () => {
      const heading = document.createElement("h1");
      heading.innerHTML = "Saved Tasks";
      const topNavigationbar = document.getElementById("topNavigation-bar");
      topNavigationbar.innerHTML = "";
      topNavigationbar.appendChild(heading);
      topNavigationbar.classList.add("dynamicHeading");
      startedText.style.color = "blue";
      heading.style.color = "blue";
      taskText.style.color = "#5b5b5b";
      binText.style.color = "#5b5b5b";
      const currentTodoList = getTodoItems();
      const listToRender = currentTodoList.filter((item) => item.isStarred);
      renderList(listToRender);
    });

    binText.addEventListener("click", () => {
      const heading = document.createElement("h1");
      heading.innerHTML = "Bin";
      const topNavigationbar = document.getElementById("topNavigation-bar");
      topNavigationbar.innerHTML = "";
      topNavigationbar.appendChild(heading);
      topNavigationbar.classList.add("dynamicHeading");
      binText.style.color = "blue";
      heading.style.color = "blue";
      taskText.style.color = "#5b5b5b";
      startedText.style.color = "#5b5b5b";
      const currentTodoList = getTodoItems();
      const listToRender = currentTodoList.filter((item) => item.isDeleted);
      renderList(listToRender);
    });
    // filter the currentTodoList

    const renderList = (todos) => {
      listContainer.innerHTML = "";
      todos.forEach((item) => {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.checked = !item.isPending;
        checkbox.classList.add("todoListIcons");
        checkbox.addEventListener("click", () => {
          const currentTodoList = getTodoItems();
          const updatedList = currentTodoList.map((ele) => {
            if (ele.id == item.id) {
              return {
                ...ele,
                isPending: !ele.isPending,
              };
            } else {
              return { ...ele };
            }
          });
          setTodoItems(updatedList);
        });
        const listItem = document.createElement("li");
        listItem.innerHTML = item.todoTitle;
        listItem.classList.add("listItem");

        const startedBtn = document.createElement("img");

        startedBtn.src = item.isStarred
          ? "assets/str.png"
          : "assets/Star 2.svg";
        item.isStarred
          ? startedBtn.classList.add("starrednewImg")
          : startedBtn.classList.add("todoListIcons");
        const deleteBtn = document.createElement("img");
        deleteBtn.src = "assets/bin icon.svg";
        deleteBtn.classList.add("todoListIcons");
        deleteBtn.addEventListener("click", () => {
          listContainer.removeChild(listItem);
          const currentTodoList = getTodoItems();
          const updatedList = currentTodoList.map((ele) => {
            if (ele.id == item.id) {
              return {
                ...ele,
                isDeleted: !ele.isDeleted,
              };
            } else {
              return { ...ele };
            }
          });
          setTodoItems(updatedList);
        });
        !item.isDeleted && listItem.appendChild(checkbox);

        !item.isDeleted && listItem.appendChild(startedBtn);

        !item.isDeleted && listItem.appendChild(deleteBtn);

        listContainer.appendChild(listItem);
        // starred
        startedBtn.addEventListener("click", () => {
          startedBtn.src = "assets/str.png";
          startedBtn.classList.add("starrednewImg");

          const currentTodoList = getTodoItems();
          const updatedList = currentTodoList.map((ele) => {
            if (ele.id == item.id) {
              return {
                ...ele,
                isStarred: !ele.isStarred,
              };
            } else {
              return { ...ele };
            }
          });
          setTodoItems(updatedList);
        });
      });
      // delete
    };
  </script>
</html>
